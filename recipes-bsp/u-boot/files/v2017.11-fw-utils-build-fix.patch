From 8ff69a3f4db024ece80b89cf23ca9f7e6f0fba58 Mon Sep 17 00:00:00 2001
From: Stefan Agner <stefan.agner@toradex.com>
Date: Tue, 14 Nov 2017 15:47:18 +0100
Subject: [PATCH 1/1] envtools: make sure version/timestamp header file are
 available

With commit 84d46e7e8948 ("tools: env: allow to print U-Boot version")
the fw_env utilities need the version.h header file. Building only
the envtools in a pristine build directory will fail due to missing
header files.

Make sure the header files are a dependency of the envtools target.

Fixes: 84d46e7e8948 ("tools: env: allow to print U-Boot version")
Signed-off-by: Stefan Agner <stefan.agner@toradex.com>
Tested-by: Peter Robinson <pbrobinson@gmail.com>
Reviewed-by: Simon Glass <sjg@chromium.org>

Upstream-Status: Backport [http://git.denx.de/?p=u-boot.git;a=commit;h=ded84f90a1066eef5f34daa4539273de64f7b811]

Signed-off-by: Kristian Amlie <kristian.amlie@northern.tech>
---
 Makefile | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/Makefile b/Makefile
index 61fd973..f8c66a2 100644
--- a/Makefile
+++ b/Makefile
@@ -1447,7 +1447,7 @@ checkarmreloc: u-boot
 		false; \
 	fi

-envtools: scripts_basic
+envtools: scripts_basic $(version_h) $(timestamp_h)
 	$(Q)$(MAKE) $(build)=tools/env

 tools-only: scripts_basic $(version_h) $(timestamp_h)
--
2.7.4

