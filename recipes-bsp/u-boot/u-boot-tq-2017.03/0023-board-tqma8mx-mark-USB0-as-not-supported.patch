From 88219f3f78c0196905ced25b38fb404ae50590dd Mon Sep 17 00:00:00 2001
From: Markus Niebel <Markus.Niebel@tq-group.com>
Date: Fri, 18 Jan 2019 10:08:53 +0100
Subject: [PATCH 23/25] board: tqma8mx: mark USB0 as not supported

Signed-off-by: Markus Niebel <Markus.Niebel@tq-group.com>
---
 board/tqc/tqma8mx/tqma8mx-mba8mx.c | 12 ++++++++++++
 1 file changed, 12 insertions(+)

diff --git a/board/tqc/tqma8mx/tqma8mx-mba8mx.c b/board/tqc/tqma8mx/tqma8mx-mba8mx.c
index e71423477c..804a8cc258 100644
--- a/board/tqc/tqma8mx/tqma8mx-mba8mx.c
+++ b/board/tqc/tqma8mx/tqma8mx-mba8mx.c
@@ -131,8 +131,15 @@ static void dwc3_nxp_usb_phy_init(struct dwc3_device *dwc3)
 int board_usb_init(int index, enum usb_init_type init)
 {
 	int ret = 0;
+
+	if (index == 0) {
+		puts("USB0/OTG not supported yet\n");
+		return 1;
+	}
+
 	imx8m_usb_power(index, true);
 
+#if 0
 	if (index == 0 && init == USB_INIT_DEVICE) {
 #ifdef CONFIG_USB_TCPC
 		ret = tcpc_setup_ufp_mode(&port);
@@ -145,6 +152,7 @@ int board_usb_init(int index, enum usb_init_type init)
 #endif
 		return ret;
 	}
+#endif
 
 	return 0;
 }
@@ -152,6 +160,10 @@ int board_usb_init(int index, enum usb_init_type init)
 int board_usb_cleanup(int index, enum usb_init_type init)
 {
 	int ret = 0;
+
+	if (index == 0)
+		return 0;
+
 	if (index == 0 && init == USB_INIT_DEVICE) {
 		dwc3_uboot_exit(index);
 	} else if (index == 0 && init == USB_INIT_HOST) {
-- 
2.17.1

