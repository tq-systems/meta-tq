From 2635f5d000ca60abd4b53a4b13909be0ad86065d Mon Sep 17 00:00:00 2001
From: Markus Niebel <Markus.Niebel@tq-group.com>
Date: Thu, 17 Jan 2019 17:28:52 +0100
Subject: [PATCH 22/25] tqma8mq_mba8mx: improve config

move more things to defconfig

Signed-off-by: Markus Niebel <Markus.Niebel@tq-group.com>
---
 board/tqc/tqma8mx/Kconfig            | 8 ++++++++
 configs/tqma8mq_mba8mx_mmc_defconfig | 4 ++++
 include/configs/tqma8mx.h            | 9 +++++----
 3 files changed, 17 insertions(+), 4 deletions(-)

diff --git a/board/tqc/tqma8mx/Kconfig b/board/tqc/tqma8mx/Kconfig
index 9d5764c98c..10327c065a 100644
--- a/board/tqc/tqma8mx/Kconfig
+++ b/board/tqc/tqma8mx/Kconfig
@@ -40,6 +40,14 @@ config MBA8MX
 	select FEC_MXC
 	select PHYLIB
 	select PHY_TI
+	select CMD_USB
+	select CMD_MMC
+	select CMD_SF
+	select CMD_FAT
+	select CMD_EXT2
+	select CMD_EXT4
+	select CMD_EXT4_WRITE
+	select CONFIG_DOS_PARTITION
 	help
 	  Select the MBa8MX starterkit. This features a GigE Phy, USB, SD-Card
 	  etc.
diff --git a/configs/tqma8mq_mba8mx_mmc_defconfig b/configs/tqma8mq_mba8mx_mmc_defconfig
index f4aa20a52f..6bc614bb6b 100644
--- a/configs/tqma8mq_mba8mx_mmc_defconfig
+++ b/configs/tqma8mq_mba8mx_mmc_defconfig
@@ -11,10 +11,14 @@ CONFIG_HUSH_PARSER=y
 CONFIG_CMD_MEMTEST=y
 CONFIG_CMD_MEMINFO=y
 CONFIG_CMD_I2C=y
+# CONFIG_CMD_FPGA is not set
 CONFIG_CMD_GPIO=y
 CONFIG_CMD_CACHE=y
 CONFIG_CMD_TIME=y
+CONFIG_CMD_FS_GENERIC=y
 CONFIG_CMD_UBI=y
+CONFIG_EFI_PARTITION=y
+# CONFIG_SPL_EFI_PARTITION is not set
 CONFIG_OF_CONTROL=y
 CONFIG_SYS_I2C_MXC=y
 CONFIG_NXP_TMU=y
diff --git a/include/configs/tqma8mx.h b/include/configs/tqma8mx.h
index d06e581efa..5a1571d76e 100644
--- a/include/configs/tqma8mx.h
+++ b/include/configs/tqma8mx.h
@@ -242,25 +242,27 @@
 
 #define CONFIG_IMX_BOOTAUX
 
-#define CONFIG_CMD_MMC
+/* #define CONFIG_CMD_MMC */
 #define CONFIG_FSL_ESDHC
 #define CONFIG_FSL_USDHC
 
 #define CONFIG_SYS_FSL_USDHC_NUM	2
 #define CONFIG_SYS_FSL_ESDHC_ADDR       0
 
+/*
 #define CONFIG_DOS_PARTITION
 #define CONFIG_CMD_EXT2
 #define CONFIG_CMD_EXT4
 #define CONFIG_CMD_EXT4_WRITE
 #define CONFIG_CMD_FAT
+*/
 
 #define CONFIG_SUPPORT_EMMC_BOOT	/* eMMC specific */
 #define CONFIG_SYS_MMC_IMG_LOAD_PART	1
 
 #define CONFIG_FSL_QSPI    /* enable the QUADSPI driver */
 #ifdef CONFIG_FSL_QSPI
-#define CONFIG_CMD_SF
+/* #define CONFIG_CMD_SF */
 #define	CONFIG_SPI_FLASH
 #define	CONFIG_SPI_FLASH_STMICRO
 #define	CONFIG_SPI_FLASH_BAR
@@ -299,9 +301,8 @@
 #define CONFIG_SYS_USB_XHCI_MAX_ROOT_PORTS      2
 #endif
 
-#define CONFIG_CMD_USB
+/* #define CONFIG_CMD_USB */
 #define CONFIG_USB_STORAGE
-#define CONFIG_CMD_EXT2
 
 #define CONFIG_USB_DWC3
 #define CONFIG_USB_DWC3_GADGET
-- 
2.17.1

