From 594a742d5882b94d7ebea9f261f9001ebf951310 Mon Sep 17 00:00:00 2001
From: Markus Niebel <Markus.Niebel@tq-group.com>
Date: Mon, 14 Jan 2019 12:11:13 +0100
Subject: [PATCH 07/24] tqma8mx: split config header in module and baseboard
 part

Signed-off-by: Markus Niebel <Markus.Niebel@tq-group.com>
---
 include/configs/tqma8mx-mba8mx.h | 33 +++++++++++++++++++++
 include/configs/tqma8mx.h        | 49 +++++++++++++-------------------
 2 files changed, 53 insertions(+), 29 deletions(-)
 create mode 100644 include/configs/tqma8mx-mba8mx.h

diff --git a/include/configs/tqma8mx-mba8mx.h b/include/configs/tqma8mx-mba8mx.h
new file mode 100644
index 0000000000..dae548543a
--- /dev/null
+++ b/include/configs/tqma8mx-mba8mx.h
@@ -0,0 +1,33 @@
+/*
+ * Copyright 2019 TQ Systems GmbH
+ *
+ * SPDX-License-Identifier:	GPL-2.0+
+ */
+
+#if !defined(__TQMA8MX_MBA8MX_H)
+#define __TQMA8MX_MBA8MX_H
+
+/* ENET Config */
+/* ENET1 */
+#if defined(CONFIG_CMD_NET)
+#if 0
+#define CONFIG_CMD_PING
+#define CONFIG_CMD_DHCP
+#define CONFIG_CMD_MII
+#endif
+#define CONFIG_MII
+#define CONFIG_ETHPRIME                 "FEC"
+
+#define CONFIG_FEC_MXC
+#define CONFIG_FEC_XCV_TYPE             RGMII
+#define CONFIG_FEC_MXC_PHYADDR          0
+#define FEC_QUIRK_ENET_MAC
+
+#define CONFIG_PHY_GIGE
+#define IMX_FEC_BASE			0x30BE0000
+#define CONFIG_PHYLIB
+#define CONFIG_PHY_TI
+#endif
+
+
+#endif /* __TQMA8MX_MBA8MX_H */
diff --git a/include/configs/tqma8mx.h b/include/configs/tqma8mx.h
index d69007a367..10452dfdcd 100644
--- a/include/configs/tqma8mx.h
+++ b/include/configs/tqma8mx.h
@@ -1,12 +1,12 @@
 /*
  * Copyright 2017 NXP
- * Copyright 2018 TQ Systems GmbH
+ * Copyright 2019 TQ Systems GmbH
  *
  * SPDX-License-Identifier:	GPL-2.0+
  */
 
-#ifndef __IMX8M_EVK_H
-#define __IMX8M_EVK_H
+#ifndef __TQMA8MX_H
+#define __TQMA8MX_H
 
 #include <linux/sizes.h>
 #include <asm/arch/imx-regs.h>
@@ -19,9 +19,13 @@
 #define CONFIG_SPL_TEXT_BASE		0x7E1000
 #define CONFIG_SPL_MAX_SIZE		(124 * 1024)
 #define CONFIG_SYS_MONITOR_LEN		(512 * 1024)
+#if defined(CONFIG_SD_BOOT)
 #define CONFIG_SYS_MMCSD_RAW_MODE_U_BOOT_USE_SECTOR
 #define CONFIG_SYS_MMCSD_RAW_MODE_U_BOOT_SECTOR	0x300
 #define CONFIG_SYS_MMCSD_FS_BOOT_PARTITION	1
+#else
+#error
+#endif
 
 #ifdef CONFIG_SPL_BUILD
 /*#define CONFIG_ENABLE_DDR_TRAINING_DEBUG*/
@@ -79,29 +83,6 @@
 #undef CONFIG_CMD_CRC32
 #undef CONFIG_BOOTM_NETBSD
 
-/* ENET Config */
-/* ENET1 */
-#if defined(CONFIG_CMD_NET)
-#if 0
-#define CONFIG_CMD_PING
-#define CONFIG_CMD_DHCP
-#define CONFIG_CMD_MII
-#endif
-#define CONFIG_MII
-#define CONFIG_ETHPRIME                 "FEC"
-
-#define CONFIG_FEC_MXC
-#define CONFIG_FEC_XCV_TYPE             RGMII
-#define CONFIG_FEC_MXC_PHYADDR          0
-#define FEC_QUIRK_ENET_MAC
-
-#define CONFIG_PHY_GIGE
-#define IMX_FEC_BASE			0x30BE0000
-
-#define CONFIG_PHYLIB
-#define CONFIG_PHY_ATHEROS
-#endif
-
 #define CONFIG_MFG_ENV_SETTINGS \
 	"mfgtool_args=setenv bootargs console=${console},${baudrate} " \
 		"rdinit=/linuxrc " \
@@ -193,10 +174,18 @@
         (CONFIG_SYS_INIT_RAM_ADDR + CONFIG_SYS_INIT_SP_OFFSET)
 
 #define CONFIG_ENV_OVERWRITE
-#define CONFIG_ENV_OFFSET               (64 * SZ_64K)
+
+#if defined(CONFIG_SD_BOOT)
+#define CONFIG_ENV_OFFSET		(64 * SZ_64K)
 #define CONFIG_ENV_SIZE			0x1000
 #define CONFIG_ENV_IS_IN_MMC
 #define CONFIG_SYS_MMC_ENV_DEV		1   /* USDHC2 */
+#elif defined(CONFIG_QSPI_BOOT)
+#error
+#else
+#error
+#endif
+
 #define CONFIG_MMCROOT			"/dev/mmcblk1p2"  /* USDHC2 */
 
 /* Size of malloc() pool */
@@ -327,8 +316,10 @@
 #define CONFIG_IMX_VIDEO_SKIP
 #endif
 
-#if defined(CONFIG_ANDROID_SUPPORT)
+#if defined(CONFIG_MBA8MX)
+#include "tqma8mx-mba8mx.h"
+#else
 #error
-#include "imx8mq_evk_android.h"
 #endif
+
 #endif
-- 
2.17.1

