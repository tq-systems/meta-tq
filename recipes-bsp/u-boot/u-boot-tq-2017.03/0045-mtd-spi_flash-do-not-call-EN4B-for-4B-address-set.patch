From cf782e7b455a82e00b861f52c99b8deee8bd2b9a Mon Sep 17 00:00:00 2001
From: Markus Niebel <Markus.Niebel@tq-group.com>
Date: Thu, 7 Feb 2019 15:22:58 +0100
Subject: [PATCH] mtd: spi_flash: do not call EN4B for 4B address set

this command is used to switch the normal command set to use 4 byte
adresses. This is not needed when we use 4B command set.

Signed-off-by: Markus Niebel <Markus.Niebel@tq-group.com>
---
 drivers/mtd/spi/spi_flash.c | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/drivers/mtd/spi/spi_flash.c b/drivers/mtd/spi/spi_flash.c
index 70f26a5ddc..908ad26552 100644
--- a/drivers/mtd/spi/spi_flash.c
+++ b/drivers/mtd/spi/spi_flash.c
@@ -1086,6 +1086,7 @@ int spi_flash_scan(struct spi_flash *flash)
 
 #ifdef CONFIG_SPI_FLASH_4BYTES_ADDR
 		if (flash->size > SPI_FLASH_16MB_BOUN) {
+			printf("SF : select 4B addr cmd set\n");
 			flash->read_cmd = CMD_READ_ARRAY_FAST_4B;
 			flash->write_cmd = CMD_PAGE_PROGRAM_4B;
 
@@ -1093,8 +1094,6 @@ int spi_flash_scan(struct spi_flash *flash)
 				flash->erase_cmd = CMD_ERASE_4K_4B;
 			else
 				flash->erase_cmd = CMD_ERASE_64K_4B;
-
-			enter_4bytes_addr(flash);
 		}
 #endif
 
