From b2e6d5bbfcce58eb5d2c69693b97af377fe861c0 Mon Sep 17 00:00:00 2001
From: Markus Niebel <Markus.Niebel@tq-group.com>
Date: Thu, 4 Oct 2018 18:20:02 +0200
Subject: [PATCH] arm: dt: fsl-imx8qxp-tqma8qx-mba8qx: correct phy-mode for
 fec0/1

- correct phy mode
- add initial skew configs

Signed-off-by: Markus Niebel <Markus.Niebel@tq-group.com>
---
 arch/arm/dts/fsl-imx8qxp-tqma8qx-mba8qx.dts | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

diff --git a/arch/arm/dts/fsl-imx8qxp-tqma8qx-mba8qx.dts b/arch/arm/dts/fsl-imx8qxp-tqma8qx-mba8qx.dts
index 4d9b1caf3d..7eba726e30 100644
--- a/arch/arm/dts/fsl-imx8qxp-tqma8qx-mba8qx.dts
+++ b/arch/arm/dts/fsl-imx8qxp-tqma8qx-mba8qx.dts
@@ -15,6 +15,7 @@
 /dts-v1/;
 
 #include "fsl-imx8qxp-tqma8qx.dtsi"
+#include <dt-bindings/net/ti-dp83867.h>
 
 / {
 	model = "TQ Systems i.MX8QXP TQMa8xX on MBa8xX";
@@ -162,7 +163,7 @@
 &fec1 {
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_fec1>;
-	phy-mode = "rgmii";
+	phy-mode = "rgmii-id";
 	phy-handle = <&ethphy0>;
 	phy-reset-gpios = <&gpio3 2 GPIO_ACTIVE_LOW>;
 	phy-reset-duration = <500>;
@@ -176,11 +177,15 @@
 		ethphy0: ethernet-phy@0 {
 			compatible = "ethernet-phy-ieee802.3-c22";
 			reg = <0>;
+			ti,rx-internal-delay = <DP83867_RGMIIDCTL_2_50_NS>;
+			ti,tx-internal-delay = <DP83867_RGMIIDCTL_2_50_NS>;
 		};
 
 		ethphy3: ethernet-phy@3 {
 			compatible = "ethernet-phy-ieee802.3-c22";
 			reg = <3>;
+			ti,rx-internal-delay = <DP83867_RGMIIDCTL_2_50_NS>;
+			ti,tx-internal-delay = <DP83867_RGMIIDCTL_2_50_NS>;
 		};
 	};
 };
@@ -188,7 +193,7 @@
 &fec2 {
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_fec2>;
-	phy-mode = "rgmii";
+	phy-mode = "rgmii-id";
 	phy-handle = <&ethphy3>;
 	fsl,magic-packet;
 	phy-reset-gpios = <&gpio3 3 GPIO_ACTIVE_LOW>;
