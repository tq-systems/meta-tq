From 6f362b553c713b169eadabacf113f22832def131 Mon Sep 17 00:00:00 2001
From: Markus Niebel <Markus.Niebel@tq-group.com>
Date: Fri, 5 Oct 2018 14:01:04 +0200
Subject: [PATCH] phy: ti: debug bringup

Signed-off-by: Markus Niebel <Markus.Niebel@tq-group.com>
---
 drivers/net/phy/ti.c | 11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)

diff --git a/drivers/net/phy/ti.c b/drivers/net/phy/ti.c
index 7db03a66a0..4bef6dce42 100644
--- a/drivers/net/phy/ti.c
+++ b/drivers/net/phy/ti.c
@@ -297,12 +297,21 @@ static int dp83867_config(struct phy_device *phydev)
 
 		phy_write_mmd_indirect(phydev, DP83867_RGMIICTL,
 				       DP83867_DEVADDR, phydev->addr, val);
+		val = phy_read_mmd_indirect(phydev, DP83867_RGMIICTL,
+				       DP83867_DEVADDR, phydev->addr);
+		printf("DP83867_RGMIICTL %x\n", val);
 
+		val = phy_read_mmd_indirect(phydev, DP83867_RGMIIDCTL,
+				       DP83867_DEVADDR, phydev->addr);
 		delay = (dp83867->rx_id_delay |
 			 (dp83867->tx_id_delay << DP83867_RGMII_TX_CLK_DELAY_SHIFT));
-
+		val &= (~0xffu);
+		delay |= val;
 		phy_write_mmd_indirect(phydev, DP83867_RGMIIDCTL,
 				       DP83867_DEVADDR, phydev->addr, delay);
+		val = phy_read_mmd_indirect(phydev, DP83867_RGMIIDCTL,
+					    DP83867_DEVADDR, phydev->addr);
+		printf("DP83867_RGMIIDCTL %x\n", val);
 
 		if (dp83867->io_impedance >= 0) {
 			val = phy_read_mmd_indirect(phydev,
