From cf5756fc4d72f819d16f6f8125ebfc546d686343 Mon Sep 17 00:00:00 2001
From: Markus Niebel <Markus.Niebel@tq-group.com>
Date: Mon, 10 Sep 2018 11:12:12 +0200
Subject: [PATCH 022/188] arm: boot: imx6q-mba6: [HACK] add ecspi5

Signed-off-by: Markus Niebel <Markus.Niebel@tq-group.com>
---
 arch/arm/boot/dts/imx6q-mba6.dtsi | 29 +++++++++++++++++++++++++++++
 1 file changed, 29 insertions(+)

diff --git a/arch/arm/boot/dts/imx6q-mba6.dtsi b/arch/arm/boot/dts/imx6q-mba6.dtsi
index 1de88507a2e1..f06928a613bb 100644
--- a/arch/arm/boot/dts/imx6q-mba6.dtsi
+++ b/arch/arm/boot/dts/imx6q-mba6.dtsi
@@ -10,6 +10,21 @@
  * http://www.gnu.org/copyleft/gpl.html
  */
 
+&ecspi5 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_ecspi5_mba6x>;
+	fsl,spi-num-chipselects = <1>;
+	cs-gpios = <&gpio1 17 GPIO_ACTIVE_LOW>;
+	status = "okay";
+
+	spidev5_0: spidev5-0@0 {
+		compatible = "tq,testdev";
+		spi-max-frequency = <1000000>;
+		reg = <0>;
+		status = "okay";
+	};
+};
+
 &ethphy {
 	rxdv-skew-ps = <180>;
 	txen-skew-ps = <120>;
@@ -25,6 +40,20 @@
 	rxc-skew-ps = <1860>;
 };
 
+&iomuxc {
+	ecspi5 {
+		pinctrl_ecspi5_mba6x: ecspi5grp-mba6x {
+			fsl,pins = <
+				/* HYS, SPEED = MED, 100k up, DSE = 011, SRE_FAST */
+				MX6QDL_PAD_SD1_DAT0__ECSPI5_MISO 0x1b099
+				MX6QDL_PAD_SD1_CMD__ECSPI5_MOSI 0xb099
+				MX6QDL_PAD_SD1_CLK__ECSPI5_SCLK 0xb099
+				MX6QDL_PAD_SD1_DAT1__GPIO1_IO17 0xb099 /* eCSPI5 SS0 */
+			>;
+		};
+	};
+};
+
 &sata {
 	status = "okay";
 };
