From 77e86f54ebc28e97c503efa43cdb1ea43ab129ea Mon Sep 17 00:00:00 2001
From: Max Merchel <Max.Merchel@tq-group.com>
Date: Thu, 24 Jan 2019 15:34:17 +0100
Subject: [PATCH 108/188] arm: dt: imx7-mba7: add spi

Signed-off-by: Max Merchel <Max.Merchel@tq-group.com>
---
 arch/arm/boot/dts/imx7-mba7.dtsi | 65 ++++++++++++++++++++++++++++++++
 1 file changed, 65 insertions(+)

diff --git a/arch/arm/boot/dts/imx7-mba7.dtsi b/arch/arm/boot/dts/imx7-mba7.dtsi
index 98f243577636..ac1a99844684 100644
--- a/arch/arm/boot/dts/imx7-mba7.dtsi
+++ b/arch/arm/boot/dts/imx7-mba7.dtsi
@@ -149,6 +149,51 @@
 	};
 };
 
+&ecspi1 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_ecspi1>;
+	fsl,spi-num-chipselects = <3>;
+	cs-gpios = <&gpio4 0 GPIO_ACTIVE_LOW>, <&gpio4 1 GPIO_ACTIVE_LOW>,
+		   <&gpio4 2 GPIO_ACTIVE_LOW>;
+
+	status = "okay";
+
+	spidev0_0: spidev0-0@0 {
+		compatible = "tq,testdev";
+		spi-max-frequency = <5000000>;
+		reg = <0>;
+		status = "okay";
+	};
+
+	spidev0_1: spidev0-1@1 {
+		compatible = "tq,testdev";
+		spi-max-frequency = <10000000>;
+		reg = <1>;
+		status = "okay";
+	};
+
+	spidev0_2: spidev0-2@2 {
+		compatible = "tq,testdev";
+		spi-max-frequency = <25000000>;
+		reg = <2>;
+		status = "okay";
+	};
+};
+
+&ecspi2 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_ecspi2>;
+	fsl,spi-num-chipselects = <1>;
+	status = "okay";
+
+	spidev1_0: spidev1-0@0 {
+		compatible = "tq,testdev";
+		spi-max-frequency = <5000000>;
+		reg = <0>;
+		status = "okay";
+	};
+};
+
 &fec1 {
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_enet1>;
@@ -232,6 +277,26 @@
 	pinctrl-0 = <&pinctrl_hog_mba7_1>;
 
 	imx7-mba7 {
+		pinctrl_ecspi1: ecspi1grp {
+			fsl,pins = <
+				MX7D_PAD_ECSPI1_MISO__ECSPI1_MISO		0x7c
+				MX7D_PAD_ECSPI1_MOSI__ECSPI1_MOSI		0x74
+				MX7D_PAD_ECSPI1_SCLK__ECSPI1_SCLK		0x74
+				MX7D_PAD_UART1_RX_DATA__GPIO4_IO0		0x74
+				MX7D_PAD_UART1_TX_DATA__GPIO4_IO1		0x74
+				MX7D_PAD_UART2_RX_DATA__GPIO4_IO2		0x74
+			>;
+		};
+
+		pinctrl_ecspi2: ecspi2grp {
+			fsl,pins = <
+				MX7D_PAD_ECSPI2_MISO__ECSPI2_MISO		0x7c
+				MX7D_PAD_ECSPI2_MOSI__ECSPI2_MOSI		0x74
+				MX7D_PAD_ECSPI2_SCLK__ECSPI2_SCLK		0x74
+				MX7D_PAD_ECSPI2_SS0__ECSPI2_SS0			0x74
+			>;
+		};
+
 		pinctrl_enet1: enet1grp {
 			fsl,pins = <
 				MX7D_PAD_GPIO1_IO10__ENET1_MDIO			0x02
