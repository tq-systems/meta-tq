From 7f44d70eb300aa03b337b134918343668760fcae Mon Sep 17 00:00:00 2001
From: Markus Niebel <Markus.Niebel@tq-group.com>
Date: Mon, 13 May 2019 12:16:52 +0200
Subject: [PATCH] arm64: dt: mbpa8xx-common: add CAN0

Signed-off-by: Markus Niebel <Markus.Niebel@tq-group.com>
---
 arch/arm64/boot/dts/freescale/mbpa8xx-common.dtsi | 15 +++++++++++++++
 1 file changed, 15 insertions(+)

diff --git a/arch/arm64/boot/dts/freescale/mbpa8xx-common.dtsi b/arch/arm64/boot/dts/freescale/mbpa8xx-common.dtsi
index c67ebb5c1194..9b41ec938081 100644
--- a/arch/arm64/boot/dts/freescale/mbpa8xx-common.dtsi
+++ b/arch/arm64/boot/dts/freescale/mbpa8xx-common.dtsi
@@ -61,6 +61,14 @@
 	};
 };
 
+/* CPU device tree mixes up counting from 0 and counting from 1 */
+&flexcan1 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_can0>;
+	xceiver-supply = <&reg_mbpa8xx_3v3>;
+	status = "okay";
+};
+
 &iomuxc {
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_hog>;
@@ -87,6 +95,13 @@
 			>;
 		};
 
+		pinctrl_can0: can0grp {
+			fsl,pins = <
+				SC_P_FLEXCAN0_RX_ADMA_FLEXCAN0_RX		0x06000020
+				SC_P_FLEXCAN0_TX_ADMA_FLEXCAN0_TX		0x06000020
+			>;
+		};
+
 		pinctrl_hog: hoggrp {
 			fsl,pins = <
 				/* Rev detect */
