From 63750a5c2f5bbf22093a51fdc74bc83fd9cfca6a Mon Sep 17 00:00:00 2001
From: Max Merchel <Max.Merchel@tq-group.com>
Date: Mon, 4 Feb 2019 10:18:35 +0100
Subject: [PATCH 119/188] arm: dt: imx7-mba7: add devicetree for glyn
 etm0700g0edh6

Signed-off-by: Max Merchel <Max.Merchel@tq-group.com>
---
 .../dts/imx7-mba7-glyn-etm0700g0edh6.dtsi     | 62 +++++++++++++++++++
 .../dts/imx7d-mba7-glyn-etm0700g0edh6.dts     | 10 +++
 .../dts/imx7s-mba7-glyn-etm0700g0edh6.dts     | 10 +++
 3 files changed, 82 insertions(+)
 create mode 100644 arch/arm/boot/dts/imx7-mba7-glyn-etm0700g0edh6.dtsi
 create mode 100644 arch/arm/boot/dts/imx7d-mba7-glyn-etm0700g0edh6.dts
 create mode 100644 arch/arm/boot/dts/imx7s-mba7-glyn-etm0700g0edh6.dts

diff --git a/arch/arm/boot/dts/imx7-mba7-glyn-etm0700g0edh6.dtsi b/arch/arm/boot/dts/imx7-mba7-glyn-etm0700g0edh6.dtsi
new file mode 100644
index 000000000000..6ba53915edcc
--- /dev/null
+++ b/arch/arm/boot/dts/imx7-mba7-glyn-etm0700g0edh6.dtsi
@@ -0,0 +1,62 @@
+// SPDX-License-Identifier: GPL-2.0+ OR MIT
+/*
+ * Copyright (C) 2016 - 2019 TQ Systems GmbH
+ * Author: Marco Felsch
+ * Author: Markus Niebel <Markus.Niebel@tq-group.com>
+ */
+
+/ {
+	/* ETM0700G0EDH6, DS 2016/04/06, ver 3 */
+	display_etm0700: display {
+		bits-per-pixel = <32>; /* 32: RGB8880 */
+		bus-width = <18>;
+
+		display-timings {
+			native-mode = <&timing1>;
+			timing1: 800x480p62 {
+				clock-frequency = <33260000>;
+				hactive = <800>;
+				vactive = <480>;
+				hfront-porch = <40>;
+				hsync-len = <128>;
+				hback-porch = <88>;
+				vfront-porch = <10>;
+				vsync-len = <2>;
+				vback-porch = <33>;
+				hsync-active = <0>;
+				vsync-active = <0>;
+				de-active = <1>;
+				pixelclk-active = <0>;
+			};
+		};
+	};
+};
+
+&backlight {
+	/* 1 kHz as stated by GLYN FAE */
+	pwms = <&pwm1 0 1000000 1>;
+	brightness-levels = <16 32 64 96 128 160 180 200 255>;
+	default-brightness-level = <5>;
+	status = "okay";
+};
+
+&lcdif {
+	display = <&display_etm0700>;
+	status = "okay";
+};
+
+&polytouch {
+	gain = <1>;
+	offset = <0>;
+	threshold = <0x0f>;
+
+	/* no wake gpio for this variant */
+	/delete-property/ wake-gpios;
+
+	/*
+	 * do not use size settings, display touch reads
+	 * out and uses 1792 x 1024 (tested with ETM0700G0EDH6)
+	 */
+
+	status = "okay";
+};
diff --git a/arch/arm/boot/dts/imx7d-mba7-glyn-etm0700g0edh6.dts b/arch/arm/boot/dts/imx7d-mba7-glyn-etm0700g0edh6.dts
new file mode 100644
index 000000000000..de4d76b3e73c
--- /dev/null
+++ b/arch/arm/boot/dts/imx7d-mba7-glyn-etm0700g0edh6.dts
@@ -0,0 +1,10 @@
+// SPDX-License-Identifier: GPL-2.0+ OR MIT
+/*
+ * Copyright (C) 2016 - 2019 TQ Systems GmbH
+ * Author: Marco Felsch
+ * Author: Markus Niebel <Markus.Niebel@tq-group.com>
+ */
+
+#include "imx7d-mba7.dts"
+#include "imx7-mba7-lcdif.dtsi"
+#include "imx7-mba7-glyn-etm0700g0edh6.dtsi"
diff --git a/arch/arm/boot/dts/imx7s-mba7-glyn-etm0700g0edh6.dts b/arch/arm/boot/dts/imx7s-mba7-glyn-etm0700g0edh6.dts
new file mode 100644
index 000000000000..e1ea084fb8e5
--- /dev/null
+++ b/arch/arm/boot/dts/imx7s-mba7-glyn-etm0700g0edh6.dts
@@ -0,0 +1,10 @@
+// SPDX-License-Identifier: GPL-2.0+ OR MIT
+/*
+ * Copyright (C) 2016 - 2019 TQ Systems GmbH
+ * Author: Marco Felsch
+ * Author: Markus Niebel <Markus.Niebel@tq-group.com>
+ */
+
+#include "imx7s-mba7.dts"
+#include "imx7-mba7-lcdif.dtsi"
+#include "imx7-mba7-glyn-etm0700g0edh6.dtsi"
