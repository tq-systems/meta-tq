From 8ecc3ca48c99f2fe5249894294b669819948e5a5 Mon Sep 17 00:00:00 2001
From: Max Merchel <Max.Merchel@tq-group.com>
Date: Mon, 11 Feb 2019 14:32:49 +0100
Subject: [PATCH 123/188] arm: dt: imx7-mba7: usb otg use port power function
 to enable vbus

Signed-off-by: Max Merchel <Max.Merchel@tq-group.com>
---
 arch/arm/boot/dts/imx7-mba7.dtsi  | 8 +++-----
 arch/arm/boot/dts/imx7d-mba7.dtsi | 9 +++------
 2 files changed, 6 insertions(+), 11 deletions(-)

diff --git a/arch/arm/boot/dts/imx7-mba7.dtsi b/arch/arm/boot/dts/imx7-mba7.dtsi
index b5059c78ead7..3c66061ae526 100644
--- a/arch/arm/boot/dts/imx7-mba7.dtsi
+++ b/arch/arm/boot/dts/imx7-mba7.dtsi
@@ -164,6 +164,7 @@
 			regulator-max-microvolt = <5000000>;
 			gpio = <&gpio1 5 GPIO_ACTIVE_HIGH>;
 			enable-active-high;
+			status = "disabled";
 		};
 
 		reg_usb_otg2_vbus: regulator@4 {
@@ -575,7 +576,7 @@
 		pinctrl_usbotg1: usbotg1grp {
 			fsl,pins = <
 				MX7D_PAD_LPSR_GPIO1_IO04__USB_OTG1_OC	0x5c
-				MX7D_PAD_LPSR_GPIO1_IO05__GPIO1_IO5	0x59
+				MX7D_PAD_LPSR_GPIO1_IO05__USB_OTG1_PWR	0x59
 			>;
 		};
 
@@ -651,10 +652,7 @@
 &usbotg1 {
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_usbotg1>;
-	vbus-supply = <&reg_usb_otg1_vbus>;
-	srp-disable;
-	hnp-disable;
-	adp-disable;
+	power-polarity-active-high;
 	dr_mode = "otg";
 	status = "okay";
 };
diff --git a/arch/arm/boot/dts/imx7d-mba7.dtsi b/arch/arm/boot/dts/imx7d-mba7.dtsi
index edf4582bbe6d..e30839513e89 100644
--- a/arch/arm/boot/dts/imx7d-mba7.dtsi
+++ b/arch/arm/boot/dts/imx7d-mba7.dtsi
@@ -80,7 +80,7 @@
 		pinctrl_usbotg2: usbotg2grp {
 			fsl,pins = <
 				MX7D_PAD_LPSR_GPIO1_IO06__USB_OTG2_OC	0x5c
-				MX7D_PAD_LPSR_GPIO1_IO07__GPIO1_IO7	0x59
+				MX7D_PAD_LPSR_GPIO1_IO07__USB_OTG2_PWR	0x59
 			>;
 		};
 	};
@@ -106,10 +106,7 @@
 &usbotg2 {
 	pinctrl-names = "default";
 	pinctrl-0 = <&pinctrl_usbotg2>;
-	vbus-supply = <&reg_usb_otg2_vbus>;
-	srp-disable;
-	hnp-disable;
-	adp-disable;
-	dr_mode = "host";
+	power-polarity-active-high;
+	dr_mode = "otg";
 	status = "okay";
 };
