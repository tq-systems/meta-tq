From 4e49588c52d42a2398ede911fbf188754832c376 Mon Sep 17 00:00:00 2001
From: Michael Krummsdorf <michael.krummsdorf@tq-group.com>
Date: Wed, 6 Feb 2019 15:44:05 +0100
Subject: [PATCH 093/188] dt: mba6ulx: migrate trees

- from TQMaxx2-v4.1.15-rel_imx_4.1.15_2.0.0_ga: 9397fb9d5d29

Signed-off-by: Michael Krummsdorf <michael.krummsdorf@tq-group.com>
---
 arch/arm/boot/dts/Makefile             |  3 +-
 arch/arm/boot/dts/imx6ul-mba6ulx.dts   | 21 +++++++
 arch/arm/boot/dts/imx6ul-tqma6ulx.dtsi | 81 ++++++++++++++++++++++++++
 arch/arm/boot/dts/tqma6ulx-common.dtsi | 36 ++++++++++++
 4 files changed, 140 insertions(+), 1 deletion(-)
 create mode 100644 arch/arm/boot/dts/imx6ul-mba6ulx.dts
 create mode 100644 arch/arm/boot/dts/imx6ul-tqma6ulx.dtsi
 create mode 100644 arch/arm/boot/dts/tqma6ulx-common.dtsi

diff --git a/arch/arm/boot/dts/Makefile b/arch/arm/boot/dts/Makefile
index 936144372288..7ec9a2c50539 100644
--- a/arch/arm/boot/dts/Makefile
+++ b/arch/arm/boot/dts/Makefile
@@ -572,7 +572,8 @@ dtb-$(CONFIG_SOC_IMX6UL) += \
 	imx6ul-9x9-evk-btwifi.dtb \
 	imx6ul-9x9-evk-btwifi-oob.dtb \
 	imx6ul-9x9-evk-ldo.dtb \
-	imx6ul-mba6ulx-lga.dtb
+	imx6ul-mba6ulx-lga.dtb \
+	imx6ul-mba6ulx.dtb
 dtb-$(CONFIG_SOC_IMX6ULL) += \
 	imx6ull-14x14-ddr3-arm2.dtb \
 	imx6ull-14x14-ddr3-arm2-adc.dtb \
diff --git a/arch/arm/boot/dts/imx6ul-mba6ulx.dts b/arch/arm/boot/dts/imx6ul-mba6ulx.dts
new file mode 100644
index 000000000000..0c543cb9ac0d
--- /dev/null
+++ b/arch/arm/boot/dts/imx6ul-mba6ulx.dts
@@ -0,0 +1,21 @@
+/*
+ * Copyright 2016 Marco Felsch, TQ Systems GmbH
+ *
+ * The code contained herein is licensed under the GNU General Public
+ * License. You may obtain a copy of the GNU General Public License
+ * Version 2 or later at the following locations:
+ *
+ * http://www.opensource.org/licenses/gpl-license.html
+ * http://www.gnu.org/copyleft/gpl.html
+ */
+
+/dts-v1/;
+
+#include <dt-bindings/input/input.h>
+#include "imx6ul-tqma6ulx.dtsi"
+#include "mba6ul-common.dtsi"
+
+/ {
+	model = "TQ Systems i.MX6 UltraLite Baseboard with TQMa6ULx";
+	compatible = "tqc,imx6ul-mba6ulx", "tqc,imx6ul-mba6ul", "fsl,imx6ul";
+};
diff --git a/arch/arm/boot/dts/imx6ul-tqma6ulx.dtsi b/arch/arm/boot/dts/imx6ul-tqma6ulx.dtsi
new file mode 100644
index 000000000000..cadda788feec
--- /dev/null
+++ b/arch/arm/boot/dts/imx6ul-tqma6ulx.dtsi
@@ -0,0 +1,81 @@
+/*
+ * Copyright 2018 Markus Niebel, TQ Systems GmbH
+ *
+ * The code contained herein is licensed under the GNU General Public
+ * License. You may obtain a copy of the GNU General Public License
+ * Version 2 or later at the following locations:
+ *
+ * http://www.opensource.org/licenses/gpl-license.html
+ * http://www.gnu.org/copyleft/gpl.html
+ */
+
+#include "imx6ul.dtsi"
+#include "tqma6ul-common.dtsi"
+#include "tqma6ulx-common.dtsi"
+
+/ {
+	model = "TQMa6ULx SOM";
+};
+
+&iomuxc {
+	imx6ul-tqma6ul {
+		pinctrl_usdhc2: usdhc2grp {
+			fsl,pins = <
+				MX6UL_PAD_NAND_RE_B__USDHC2_CLK		0x00017051
+				MX6UL_PAD_NAND_WE_B__USDHC2_CMD		0x00017051
+				MX6UL_PAD_NAND_DATA00__USDHC2_DATA0	0x00017051
+				MX6UL_PAD_NAND_DATA01__USDHC2_DATA1	0x00017051
+				MX6UL_PAD_NAND_DATA02__USDHC2_DATA2	0x00017051
+				MX6UL_PAD_NAND_DATA03__USDHC2_DATA3	0x00017051
+				MX6UL_PAD_NAND_DATA04__USDHC2_DATA4	0x00017051
+				MX6UL_PAD_NAND_DATA05__USDHC2_DATA5	0x00017051
+				MX6UL_PAD_NAND_DATA06__USDHC2_DATA6	0x00017051
+				MX6UL_PAD_NAND_DATA07__USDHC2_DATA7	0x00017051
+				/* rst */
+				MX6UL_PAD_NAND_ALE__GPIO4_IO10		0x0001b051
+			>;
+		};
+
+		pinctrl_usdhc2_100mhz: usdhc2grp_100mhz {
+			fsl,pins = <
+				MX6UL_PAD_NAND_RE_B__USDHC2_CLK		0x000170e1
+				MX6UL_PAD_NAND_WE_B__USDHC2_CMD		0x000170f1
+				MX6UL_PAD_NAND_DATA00__USDHC2_DATA0	0x000170f1
+				MX6UL_PAD_NAND_DATA01__USDHC2_DATA1	0x000170f1
+				MX6UL_PAD_NAND_DATA02__USDHC2_DATA2	0x000170f1
+				MX6UL_PAD_NAND_DATA03__USDHC2_DATA3	0x000170f1
+				MX6UL_PAD_NAND_DATA04__USDHC2_DATA4	0x000170f1
+				MX6UL_PAD_NAND_DATA05__USDHC2_DATA5	0x000170f1
+				MX6UL_PAD_NAND_DATA06__USDHC2_DATA6	0x000170f1
+				MX6UL_PAD_NAND_DATA07__USDHC2_DATA7	0x000170f1
+				/* rst */
+				MX6UL_PAD_NAND_ALE__GPIO4_IO10		0x0001b051
+			>;
+		};
+
+		pinctrl_usdhc2_200mhz: usdhc2grp_200mhz {
+			fsl,pins = <
+				MX6UL_PAD_NAND_RE_B__USDHC2_CLK		0x000170f1
+				MX6UL_PAD_NAND_WE_B__USDHC2_CMD		0x000170e1
+				MX6UL_PAD_NAND_DATA00__USDHC2_DATA0	0x000170e1
+				MX6UL_PAD_NAND_DATA01__USDHC2_DATA1	0x000170e1
+				MX6UL_PAD_NAND_DATA02__USDHC2_DATA2	0x000170e1
+				MX6UL_PAD_NAND_DATA03__USDHC2_DATA3	0x000170e1
+				MX6UL_PAD_NAND_DATA04__USDHC2_DATA4	0x000170e1
+				MX6UL_PAD_NAND_DATA05__USDHC2_DATA5	0x000170e1
+				MX6UL_PAD_NAND_DATA06__USDHC2_DATA6	0x000170e1
+				MX6UL_PAD_NAND_DATA07__USDHC2_DATA7	0x000170e1
+				/* rst */
+				MX6UL_PAD_NAND_ALE__GPIO4_IO10		0x0001b051
+			>;
+		};
+	};
+};
+
+&usdhc2 {
+	fsl,tuning-step= <6>;
+	max-frequency = <99000000>;
+	assigned-clocks = <&clks IMX6UL_CLK_USDHC2_SEL>, <&clks IMX6UL_CLK_USDHC2>;
+	assigned-clock-parents = <&clks IMX6UL_CLK_PLL2_PFD2>;
+	assigned-clock-rates = <0>, <198000000>;
+};
diff --git a/arch/arm/boot/dts/tqma6ulx-common.dtsi b/arch/arm/boot/dts/tqma6ulx-common.dtsi
new file mode 100644
index 000000000000..9a151e4f7324
--- /dev/null
+++ b/arch/arm/boot/dts/tqma6ulx-common.dtsi
@@ -0,0 +1,36 @@
+/*
+ * Copyright 2016 Marco Felsch, TQ Systems GmbH
+ * Copyright 2017 - 2018 Markus Niebel, TQ Systems GmbH
+ *
+ * The code contained herein is licensed under the GNU General Public
+ * License. You may obtain a copy of the GNU General Public License
+ * Version 2 or later at the following locations:
+ *
+ * http://www.opensource.org/licenses/gpl-license.html
+ * http://www.gnu.org/copyleft/gpl.html
+ */
+
+&iomuxc {
+	imx6ul-tqma6ul {
+		pinctrl_qspi: qspigrp {
+			fsl,pins = <
+				MX6UL_PAD_NAND_WP_B__QSPI_A_SCLK      0x70b9
+				MX6UL_PAD_NAND_READY_B__QSPI_A_DATA00 0x70b9
+				MX6UL_PAD_NAND_CE0_B__QSPI_A_DATA01   0x70b9
+				MX6UL_PAD_NAND_CE1_B__QSPI_A_DATA02   0x70b9
+				MX6UL_PAD_NAND_CLE__QSPI_A_DATA03     0x70b9
+				MX6UL_PAD_NAND_DQS__QSPI_A_SS0_B      0x70a1
+			>;
+		};
+	};
+};
+
+&reg_sw2 {
+	regulator-always-on;
+};
+
+/* eMMC */
+&usdhc2 {
+	vmmc-supply = <&reg_sw2>;
+	vqmmc-supply = <&reg_vldo4>;
+};
