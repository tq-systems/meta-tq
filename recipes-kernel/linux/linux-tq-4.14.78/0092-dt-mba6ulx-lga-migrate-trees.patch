From bc697c852caa91aa3d932aa755b5c5fecd640bdf Mon Sep 17 00:00:00 2001
From: Michael Krummsdorf <michael.krummsdorf@tq-group.com>
Date: Thu, 31 Jan 2019 17:19:36 +0100
Subject: [PATCH 092/188] dt: mba6ulx-lga: migrate trees

- from TQMaxx2-v4.1.15-rel_imx_4.1.15_2.0.0_ga: 9397fb9d5d29

Signed-off-by: Michael Krummsdorf <michael.krummsdorf@tq-group.com>
---
 arch/arm/boot/dts/Makefile               |   3 +-
 arch/arm/boot/dts/imx6ul-mba6ulx-lga.dts |  21 +
 arch/arm/boot/dts/imx6ul-tqma6ulxl.dtsi  |  81 +++
 arch/arm/boot/dts/mba6ul-common.dtsi     | 675 +++++++++++++++++++++++
 arch/arm/boot/dts/tqma6ul-common.dtsi    | 210 +++++++
 arch/arm/boot/dts/tqma6ulxl-common.dtsi  |  53 ++
 6 files changed, 1042 insertions(+), 1 deletion(-)
 create mode 100644 arch/arm/boot/dts/imx6ul-mba6ulx-lga.dts
 create mode 100644 arch/arm/boot/dts/imx6ul-tqma6ulxl.dtsi
 create mode 100644 arch/arm/boot/dts/mba6ul-common.dtsi
 create mode 100644 arch/arm/boot/dts/tqma6ul-common.dtsi
 create mode 100644 arch/arm/boot/dts/tqma6ulxl-common.dtsi

diff --git a/arch/arm/boot/dts/Makefile b/arch/arm/boot/dts/Makefile
index 2c831fa2b7c7..936144372288 100644
--- a/arch/arm/boot/dts/Makefile
+++ b/arch/arm/boot/dts/Makefile
@@ -571,7 +571,8 @@ dtb-$(CONFIG_SOC_IMX6UL) += \
 	imx6ul-9x9-evk-csi.dtb \
 	imx6ul-9x9-evk-btwifi.dtb \
 	imx6ul-9x9-evk-btwifi-oob.dtb \
-	imx6ul-9x9-evk-ldo.dtb
+	imx6ul-9x9-evk-ldo.dtb \
+	imx6ul-mba6ulx-lga.dtb
 dtb-$(CONFIG_SOC_IMX6ULL) += \
 	imx6ull-14x14-ddr3-arm2.dtb \
 	imx6ull-14x14-ddr3-arm2-adc.dtb \
diff --git a/arch/arm/boot/dts/imx6ul-mba6ulx-lga.dts b/arch/arm/boot/dts/imx6ul-mba6ulx-lga.dts
new file mode 100644
index 000000000000..983dea014105
--- /dev/null
+++ b/arch/arm/boot/dts/imx6ul-mba6ulx-lga.dts
@@ -0,0 +1,21 @@
+/*
+ * Copyright 2016 Marco Felsch, TQ Systems GmbH
+ *
+ * The code contained herein is licensed under the GNU General Public
+ * License. You may obtain a copy of the GNU General Public License
+ * Version 2 or later at the following locations:
+ *
+ * http://www.opensource.org/licenses/gpl-license.html
+ * http://www.gnu.org/copyleft/gpl.html
+ */
+
+/dts-v1/;
+
+#include <dt-bindings/input/input.h>
+#include "imx6ul-tqma6ulxl.dtsi"
+#include "mba6ul-common.dtsi"
+
+/ {
+	model = "TQ Systems i.MX6 UltraLite Baseboard with TQMa6ULxL";
+	compatible = "tqc,imx6ul-mba6ulx-lga", "tqc,imx6ul-mba6ul", "fsl,imx6ul";
+};
diff --git a/arch/arm/boot/dts/imx6ul-tqma6ulxl.dtsi b/arch/arm/boot/dts/imx6ul-tqma6ulxl.dtsi
new file mode 100644
index 000000000000..305a4123e44a
--- /dev/null
+++ b/arch/arm/boot/dts/imx6ul-tqma6ulxl.dtsi
@@ -0,0 +1,81 @@
+/*
+ * Copyright 2018 Markus Niebel, TQ Systems GmbH
+ *
+ * The code contained herein is licensed under the GNU General Public
+ * License. You may obtain a copy of the GNU General Public License
+ * Version 2 or later at the following locations:
+ *
+ * http://www.opensource.org/licenses/gpl-license.html
+ * http://www.gnu.org/copyleft/gpl.html
+ */
+
+#include "imx6ul.dtsi"
+#include "tqma6ul-common.dtsi"
+#include "tqma6ulxl-common.dtsi"
+
+/ {
+	model = "TQMa6ULxL SOM";
+};
+
+&iomuxc {
+	imx6ul-tqma6ul {
+		pinctrl_usdhc2: usdhc2grp {
+			fsl,pins = <
+				MX6UL_PAD_NAND_RE_B__USDHC2_CLK		0x00017051
+				MX6UL_PAD_NAND_WE_B__USDHC2_CMD		0x00017051
+				MX6UL_PAD_NAND_DATA00__USDHC2_DATA0	0x00017051
+				MX6UL_PAD_NAND_DATA01__USDHC2_DATA1	0x00017051
+				MX6UL_PAD_NAND_DATA02__USDHC2_DATA2	0x00017051
+				MX6UL_PAD_NAND_DATA03__USDHC2_DATA3	0x00017051
+				MX6UL_PAD_NAND_DATA04__USDHC2_DATA4	0x00017051
+				MX6UL_PAD_NAND_DATA05__USDHC2_DATA5	0x00017051
+				MX6UL_PAD_NAND_DATA06__USDHC2_DATA6	0x00017051
+				MX6UL_PAD_NAND_DATA07__USDHC2_DATA7	0x00017051
+				/* rst */
+				MX6UL_PAD_NAND_ALE__GPIO4_IO10		0x0001b051
+			>;
+		};
+
+		pinctrl_usdhc2_100mhz: usdhc2grp_100mhz {
+			fsl,pins = <
+				MX6UL_PAD_NAND_RE_B__USDHC2_CLK		0x000170e1
+				MX6UL_PAD_NAND_WE_B__USDHC2_CMD		0x000170f1
+				MX6UL_PAD_NAND_DATA00__USDHC2_DATA0	0x000170f1
+				MX6UL_PAD_NAND_DATA01__USDHC2_DATA1	0x000170f1
+				MX6UL_PAD_NAND_DATA02__USDHC2_DATA2	0x000170f1
+				MX6UL_PAD_NAND_DATA03__USDHC2_DATA3	0x000170f1
+				MX6UL_PAD_NAND_DATA04__USDHC2_DATA4	0x000170f1
+				MX6UL_PAD_NAND_DATA05__USDHC2_DATA5	0x000170f1
+				MX6UL_PAD_NAND_DATA06__USDHC2_DATA6	0x000170f1
+				MX6UL_PAD_NAND_DATA07__USDHC2_DATA7	0x000170f1
+				/* rst */
+				MX6UL_PAD_NAND_ALE__GPIO4_IO10		0x0001b051
+			>;
+		};
+
+		pinctrl_usdhc2_200mhz: usdhc2grp_200mhz {
+			fsl,pins = <
+				MX6UL_PAD_NAND_RE_B__USDHC2_CLK		0x000170f9
+				MX6UL_PAD_NAND_WE_B__USDHC2_CMD		0x000170f1
+				MX6UL_PAD_NAND_DATA00__USDHC2_DATA0	0x000170f1
+				MX6UL_PAD_NAND_DATA01__USDHC2_DATA1	0x000170f1
+				MX6UL_PAD_NAND_DATA02__USDHC2_DATA2	0x000170f1
+				MX6UL_PAD_NAND_DATA03__USDHC2_DATA3	0x000170f1
+				MX6UL_PAD_NAND_DATA04__USDHC2_DATA4	0x000170f1
+				MX6UL_PAD_NAND_DATA05__USDHC2_DATA5	0x000170f1
+				MX6UL_PAD_NAND_DATA06__USDHC2_DATA6	0x000170f1
+				MX6UL_PAD_NAND_DATA07__USDHC2_DATA7	0x000170f1
+				/* rst */
+				MX6UL_PAD_NAND_ALE__GPIO4_IO10		0x0001b051
+			>;
+		};
+	};
+};
+
+&usdhc2 {
+	fsl,tuning-step= <6>;
+	max-frequency = <99000000>;
+	assigned-clocks = <&clks IMX6UL_CLK_USDHC2_SEL>, <&clks IMX6UL_CLK_USDHC2>;
+	assigned-clock-parents = <&clks IMX6UL_CLK_PLL2_PFD2>;
+	assigned-clock-rates = <0>, <198000000>;
+};
diff --git a/arch/arm/boot/dts/mba6ul-common.dtsi b/arch/arm/boot/dts/mba6ul-common.dtsi
new file mode 100644
index 000000000000..3d4171a588f4
--- /dev/null
+++ b/arch/arm/boot/dts/mba6ul-common.dtsi
@@ -0,0 +1,675 @@
+/*
+ * Copyright 2016 Marco Felsch, TQ Systems GmbH
+ *
+ * The code contained herein is licensed under the GNU General Public
+ * License. You may obtain a copy of the GNU General Public License
+ * Version 2 or later at the following locations:
+ *
+ * http://www.opensource.org/licenses/gpl-license.html
+ * http://www.gnu.org/copyleft/gpl.html
+ */
+
+/ {
+	model = "TQ Systems i.MX6 UltraLite Baseboard";
+
+	aliases {
+		mmc1 = &usdhc1;
+		mmc0 = &usdhc2;
+	};
+
+	beeper: gpio_beeper {
+		compatible = "gpio-beeper";
+		gpios = <&expander_out1 6 GPIO_ACTIVE_HIGH>;
+	};
+
+	chosen {
+		stdout-path = &uart1;
+	};
+
+	gpio_buttons: gpio_keys {
+		compatible = "gpio-keys";
+		#address-cells = <1>;
+		#size-cells = <0>;
+		pinctrl-names = "default";
+		pinctrl-0 = <&pinctrl_buttons>;
+
+		button@0 {
+			label = "s14";
+			linux,code = <KEY_1>;
+			gpios = <&expander_in0 0 GPIO_ACTIVE_LOW>;
+		};
+
+		button@1 {
+			label = "s6";
+			linux,code = <KEY_2>;
+			gpios = <&expander_in0 1 GPIO_ACTIVE_LOW>;
+		};
+
+		button@2 {
+			label = "s7";
+			linux,code = <KEY_3>;
+			gpios = <&expander_in0 2 GPIO_ACTIVE_LOW>;
+		};
+
+		button@3 {
+			label = "POWER";
+			linux,code = <KEY_POWER>;
+			gpios = <&gpio1 3 GPIO_ACTIVE_LOW>;
+			gpio-key,wakeup;
+		};
+	};
+
+	gpio-leds {
+		compatible = "gpio-leds";
+		status = "okay";
+
+		led1 {
+			label = "led1";
+			gpios = <&expander_out1 4 GPIO_ACTIVE_HIGH>;
+			linux,default-trigger = "default-on";
+		};
+
+		led2 {
+			label = "led2";
+			gpios = <&expander_out1 5 GPIO_ACTIVE_HIGH>;
+			linux,default-trigger = "heartbeat";
+		};
+	};
+
+	regulators {
+		compatible = "simple-bus";
+		#address-cells = <1>;
+		#size-cells = <0>;
+
+		reg_mba6ul_3v3: regulator@0 {
+			compatible = "regulator-fixed";
+			regulator-name = "supply-mba6ul-3v3";
+			reg = <0>;
+			regulator-min-microvolt = <3300000>;
+			regulator-max-microvolt = <3300000>;
+			regulator-always-on;
+		};
+
+		reg_mba6ul_5v0: regulator@1 {
+			compatible = "regulator-fixed";
+			regulator-name = "supply-mba6ul-5v0";
+			reg = <1>;
+			regulator-min-microvolt = <5000000>;
+			regulator-max-microvolt = <5000000>;
+			regulator-always-on;
+		};
+
+		reg_can_3v3: regulator@2 {
+			compatible = "regulator-fixed";
+			regulator-name = "can-3v3";
+			reg = <2>;
+			regulator-min-microvolt = <3300000>;
+			regulator-max-microvolt = <3300000>;
+			regulator-always-on;
+			vin_supply = <&reg_mba6ul_3v3>;
+		};
+
+		reg_otg2vbus_5v0: regulator@3 {
+			compatible = "regulator-fixed";
+			reg = <3>;
+			gpio = <&expander_out1 0 GPIO_ACTIVE_HIGH>;
+			enable-active-high;
+			regulator-name = "otg2-vbus-supply-5v0";
+			regulator-min-microvolt = <5000000>;
+			regulator-max-microvolt = <5000000>;
+			vin_supply = <&reg_mba6ul_5v0>;
+		};
+
+		reg_otg1vbus_5v0: regulator@4 {
+			compatible = "regulator-fixed";
+			reg = <4>;
+			gpio = <&gpio1 4 GPIO_ACTIVE_HIGH>;
+			enable-active-high;
+			regulator-name = "otg1-vbus-supply-5v0";
+			regulator-min-microvolt = <5000000>;
+			regulator-max-microvolt = <5000000>;
+			vin_supply = <&reg_mba6ul_5v0>;
+		};
+
+		reg_fec_3v3: regulator@5 {
+			compatible = "regulator-fixed";
+			regulator-name = "fec-3v3";
+			reg = <5>;
+			regulator-min-microvolt = <3300000>;
+			regulator-max-microvolt = <3300000>;
+			regulator-always-on;
+			vin_supply = <&reg_mba6ul_3v3>;
+		};
+
+		reg_lcd_pwr: regulator@6 {
+			compatible = "regulator-fixed";
+			regulator-name = "lcd-pwr";
+			reg = <6>;
+			gpio = <&expander_out0 1 GPIO_ACTIVE_HIGH>;
+			enable-active-high;
+			status = "disabled";
+		};
+
+		reg_lvds_transmitter: regulator@7 {
+			compatible = "regulator-fixed";
+			regulator-name = "lvds-power";
+			reg = <7>;
+			gpio = <&expander_out0 3 GPIO_ACTIVE_HIGH>;
+			enable-active-high;
+			regulator-always-on;
+			vin_supply = <&reg_mba6ul_3v3>;
+			status = "disabled";
+		};
+
+		reg_mpcie: regulator@8 {
+			compatible = "regulator-fixed";
+			regulator-name = "mpcie-3v3";
+			reg = <8>;
+			regulator-min-microvolt = <3300000>;
+			regulator-max-microvolt = <3300000>;
+			gpio = <&expander_out0 2 GPIO_ACTIVE_HIGH>;
+			enable-active-high;
+			regulator-always-on;
+			vin_supply = <&reg_mba6ul_3v3>;
+		};
+
+		reg_audio_3v3: regulator@9 {
+			compatible = "regulator-fixed";
+			regulator-name = "VCC3V3_AUDIO";
+			reg = <9>;
+			regulator-min-microvolt = <3300000>;
+			regulator-max-microvolt = <3300000>;
+			regulator-always-on;
+		};
+	};
+
+	reserved-memory {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		ranges;
+
+		linux,cma {
+			compatible = "shared-dma-pool";
+			reusable;
+			size = <0x6000000>;
+			linux,cma-default;
+		};
+	};
+
+	sound {
+		compatible = "fsl,imx6ul-mba6ul-tlv320aic32x4",
+			     "fsl,imx-audio-tlv320aic32x4";
+		model = "imx6ul-mba6ul-tlv320aic32";
+		ssi-controller = <&sai1>;
+		audio-codec = <&codec>;
+	};
+};
+
+&clks {
+	assigned-clocks = <&clks IMX6UL_CLK_PLL4_AUDIO_DIV>;
+	assigned-clock-rates = <768000000>;
+};
+
+&ecspi2 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_ecspi2>;
+	fsl,spi-num-chipselects = <1>;
+	status = "okay";
+
+	spidev2_0: spidev2-0@0 {
+		compatible = "tq,testdev";
+		spi-max-frequency = <5000000>;
+		reg = <0>;
+		status = "okay";
+	};
+};
+
+&fec1 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_enet1>;
+	phy-mode = "rmii";
+	phy-handle = <&ethphy0>;
+	phy-supply = <&reg_fec_3v3>;
+	phy-reset-gpios = <&expander_out1 1 GPIO_ACTIVE_LOW>;
+	phy-reset-duration = <25>;
+	phy-reset-post-delay = <1>;
+	status = "okay";
+};
+
+&fec2 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_enet2>, <&pinctrl_enet2_mdc>;
+	phy-mode = "rmii";
+	phy-handle = <&ethphy1>;
+	phy-supply = <&reg_fec_3v3>;
+	phy-reset-gpios = <&expander_out1 2 GPIO_ACTIVE_LOW>;
+	phy-reset-duration = <25>;
+	phy-reset-post-delay = <1>;
+	status = "okay";
+
+	mdio {
+		#address-cells = <1>;
+		#size-cells = <0>;
+
+		ethphy0: ethernet-phy@0 {
+			compatible = "ethernet-phy-ieee802.3-c22";
+			max-speed = <100>;
+/*
+			interrupt-parent = <&expander_in0>;
+			interrupts = <6 IRQ_TYPE_LEVEL_LOW>;
+*/
+			reg = <0>;
+		};
+
+		ethphy1: ethernet-phy@1 {
+			compatible = "ethernet-phy-ieee802.3-c22";
+			max-speed = <100>;
+/*
+			interrupt-parent = <&expander_in0>;
+			interrupts = <7 IRQ_TYPE_LEVEL_LOW>;
+*/
+			reg = <1>;
+		};
+	};
+};
+
+&flash0 {
+	uboot@0 {
+		label = "U-Boot";
+		reg = <0x0 0xd0000>;
+	};
+
+	env1@d0000 {
+		label = "ENV1";
+		reg = <0xd0000 0x10000>;
+	};
+
+	env2@e0000 {
+		label = "ENV2";
+		reg = <0xe0000 0x10000>;
+	};
+
+	dtb@f0000 {
+		label = "DTB";
+		reg = <0xf0000 0x10000>;
+	};
+
+	linux@100000 {
+		label = "Linux";
+		reg = <0x100000 0x700000>;
+	};
+
+	rootfs@800000 {
+		label = "RootFS";
+		reg = <0x800000 0x3800000>;
+	};
+};
+
+&flexcan1 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_flexcan1>;
+	xceiver-supply = <&reg_can_3v3>;
+	status = "okay";
+};
+
+&flexcan2 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_flexcan2>;
+	xceiver-supply = <&reg_can_3v3>;
+	status = "okay";
+};
+
+&i2c4 {
+	codec: tlv320aic32x4@18 {
+		compatible = "ti,tlv320aic32x4";
+		reg = <0x18>;
+		clocks = <&clks IMX6UL_CLK_SAI1>;
+		clock-names = "mclk";
+		ldoin-supply = <&reg_audio_3v3>;
+		iov-supply = <&reg_audio_3v3>;
+	};
+
+	/*
+	 * NXP SE97BTP with temperature sensor + eeprom
+	 * ATTENTION: do not use correct dt compatible since this will conflict
+	 * with hwmon sysfs ABI and break device registration
+	 */
+	temp1: jc42@19 {
+		compatible = "jc42";
+		reg = <0x19>;
+		status = "okay";
+	};
+
+	/* Output-Portexpander */
+	expander_out0: pca9554@20 {
+		compatible = "nxp,pca9554";
+		reg = <0x20>;
+		/* Interrupt not connected (R410) */
+		/* interrupt-parent = <&gpio4>; */
+		/* interrupts = <24 IRQ_TYPE_LEVEL_LOW>; */
+		/* interrupt-controller; */
+		/* interrupt-cells = <2>; */
+		gpio-controller;
+		#gpio-cells = <2>;
+		status = "okay";
+	};
+
+	/* Input-Portexpander */
+	expander_in0: pca9554@21 {
+		compatible = "nxp,pca9554";
+		reg = <0x21>;
+		pinctrl-names = "default";
+		pinctrl-0 = <&pinctrl_expander_in0>;
+		interrupt-parent = <&gpio4>;
+		interrupts = <23 IRQ_TYPE_LEVEL_LOW>;
+		interrupt-controller;
+		#interrupt-cells = <2>;
+		gpio-controller;
+		#gpio-cells = <2>;
+		status = "okay";
+	};
+
+	/* Input-Portexpander */
+	expander_out1: pca9554@22 {
+		compatible = "nxp,pca9554";
+		reg = <0x22>;
+		gpio-controller;
+		#gpio-cells = <2>;
+		status = "okay";
+	};
+
+	analog_touch: stmpe811@41 {
+		compatible = "st,stmpe811";
+		reg = <0x41>;
+		interrupts = <21 IRQ_TYPE_EDGE_FALLING>;
+		interrupt-parent = <&gpio4>;
+		interrupt-controller;
+		status = "disabled";
+
+		stmpe_touchscreen {
+			compatible = "st,stmpe-ts";
+			st,adc-freq = <1>;      /* 3.25 MHz ADC clock speed */
+			st,ave-ctrl = <3>;      /* 8 sample average control */
+			st,fraction-z = <7>;    /* 7 length fractional part in z */
+			/*
+			 * 50 mA typical 80 mA max touchscreen drivers
+			 * current limit value
+			 */
+			st,i-drive = <1>;
+			st,mod-12b = <1>;       /* 12-bit ADC */
+			st,ref-sel = <0>;       /* internal ADC reference */
+			st,sample-time = <4>;   /* ADC converstion time: 80 clocks */
+			st,settling = <3>;      /* 1 ms panel driver settling time */
+			st,touch-det-delay = <5>; /* 5 ms touch detect interrupt delay */
+		};
+	};
+
+	/* NXP SE97BTP with temperature sensor + eeprom */
+	eeprom2: se97@51 {
+		compatible = "nxp,spd";
+		reg = <0x51>;
+		pagesize = <16>;
+		status = "okay";
+	};
+};
+
+&iomuxc {
+	imx6ul-mba6ul {
+		pinctrl_buttons: buttonsgrp {
+			fsl,pins = <
+				MX6UL_PAD_GPIO1_IO03__GPIO1_IO03	0x100b0
+			>;
+		};
+
+		pinctrl_ecspi2: ecspi2grp {
+			fsl,pins = <
+				MX6UL_PAD_UART4_TX_DATA__ECSPI2_SCLK	0x1b020
+				MX6UL_PAD_UART5_RX_DATA__ECSPI2_MISO	0x1b020
+				MX6UL_PAD_UART5_TX_DATA__ECSPI2_MOSI	0x1b020
+				MX6UL_PAD_UART4_RX_DATA__ECSPI2_SS0	0x1b020
+			>;
+		};
+
+		pinctrl_enet1: enet1grp {
+			fsl,pins = <
+				MX6UL_PAD_ENET1_RX_EN__ENET1_RX_EN	0x1b0b0
+				MX6UL_PAD_ENET1_RX_ER__ENET1_RX_ER	0x1b0b0
+				MX6UL_PAD_ENET1_RX_DATA0__ENET1_RDATA00	0x1b0b0
+				MX6UL_PAD_ENET1_RX_DATA1__ENET1_RDATA01	0x1b0b0
+				MX6UL_PAD_ENET1_TX_DATA0__ENET1_TDATA00	0x1b0b0
+				MX6UL_PAD_ENET1_TX_DATA1__ENET1_TDATA01	0x1b0b0
+				MX6UL_PAD_ENET1_TX_EN__ENET1_TX_EN	0x1b0b0
+				MX6UL_PAD_ENET1_TX_CLK__ENET1_REF_CLK1	0x4001b0a8
+			>;
+		};
+
+		pinctrl_enet2: enet2grp {
+			fsl,pins = <
+				MX6UL_PAD_ENET2_RX_EN__ENET2_RX_EN	0x1b0b0
+				MX6UL_PAD_ENET2_RX_ER__ENET2_RX_ER	0x1b0b0
+				MX6UL_PAD_ENET2_RX_DATA0__ENET2_RDATA00	0x1b0b0
+				MX6UL_PAD_ENET2_RX_DATA1__ENET2_RDATA01	0x1b0b0
+				MX6UL_PAD_ENET2_TX_DATA0__ENET2_TDATA00	0x1b0a0
+				MX6UL_PAD_ENET2_TX_DATA1__ENET2_TDATA01	0x1b0a0
+				MX6UL_PAD_ENET2_TX_EN__ENET2_TX_EN	0x1b0b0
+				MX6UL_PAD_ENET2_TX_CLK__ENET2_REF_CLK2	0x4001b0a8
+			>;
+		};
+
+		pinctrl_enet2_mdc: enet2mdcgrp {
+			fsl,pins = <
+				/* mdio */
+				MX6UL_PAD_GPIO1_IO07__ENET2_MDC		0x1b0b0
+				MX6UL_PAD_GPIO1_IO06__ENET2_MDIO	0x1b0b0
+			>;
+		};
+
+		pinctrl_expander_in0: expanderin0grp {
+			fsl,pins = <
+				MX6UL_PAD_CSI_DATA02__GPIO4_IO23	0x1b0b1
+			>;
+		};
+
+		pinctrl_flexcan1: flexcan1grp {
+			fsl,pins = <
+				MX6UL_PAD_UART3_RTS_B__FLEXCAN1_RX	0x1b020
+				MX6UL_PAD_UART3_CTS_B__FLEXCAN1_TX	0x1b020
+			>;
+		};
+
+		pinctrl_flexcan2: flexcan2grp {
+			fsl,pins = <
+				MX6UL_PAD_UART2_RTS_B__FLEXCAN2_RX	0x1b020
+				MX6UL_PAD_UART2_CTS_B__FLEXCAN2_TX	0x1b020
+			>;
+		};
+
+		pinctrl_pwm2: pwm2grp {
+			fsl,pins = <
+				/* 100 k PD, DSE 120 OHM, SPPEED LO */
+				MX6UL_PAD_GPIO1_IO09__PWM2_OUT		0x00003050
+			>;
+		};
+
+		pinctrl_sai1: sai1grp {
+			fsl,pins = <
+				MX6UL_PAD_CSI_DATA05__SAI1_TX_BCLK	0x1b0b1
+				MX6UL_PAD_CSI_DATA04__SAI1_TX_SYNC	0x1b0b1
+				MX6UL_PAD_CSI_DATA07__SAI1_TX_DATA	0x1f0b8
+				MX6UL_PAD_CSI_DATA06__SAI1_RX_DATA	0x110b0
+				MX6UL_PAD_CSI_DATA01__SAI1_MCLK		0x1b0b1
+			>;
+		};
+
+		pinctrl_uart1: uart1grp {
+			fsl,pins = <
+				MX6UL_PAD_UART1_TX_DATA__UART1_DCE_TX	0x1b0b1
+				MX6UL_PAD_UART1_RX_DATA__UART1_DCE_RX	0x1b0b1
+			>;
+		};
+
+		pinctrl_uart3: uart3grp {
+			fsl,pins = <
+				MX6UL_PAD_UART3_TX_DATA__UART3_DCE_TX	0x1b0b1
+				MX6UL_PAD_UART3_RX_DATA__UART3_DCE_RX	0x1b0b1
+			>;
+		};
+
+		pinctrl_uart6: uart6grp {
+			fsl,pins = <
+				MX6UL_PAD_CSI_MCLK__UART6_DCE_TX	0x1b0b1
+				MX6UL_PAD_CSI_PIXCLK__UART6_DCE_RX	0x1b0b1
+				MX6UL_PAD_CSI_VSYNC__UART6_DCE_RTS	0x1b0b1
+				MX6UL_PAD_CSI_HSYNC__UART6_DCE_CTS	0x1b0b1
+			>;
+		};
+
+		pinctrl_uart6dte: uart6dte {
+			fsl,pins = <
+				MX6UL_PAD_CSI_PIXCLK__UART6_DTE_TX	0x1b0b1
+				MX6UL_PAD_CSI_MCLK__UART6_DTE_RX	0x1b0b1
+				MX6UL_PAD_CSI_HSYNC__UART6_DTE_RTS	0x1b0b1
+				MX6UL_PAD_CSI_VSYNC__UART6_DTE_CTS	0x1b0b1
+			>;
+		};
+
+		pinctrl_usb_otg1: usbotg1grp {
+			fsl,pins = <
+				MX6UL_PAD_GPIO1_IO00__ANATOP_OTG1_ID	0x00017059
+				MX6UL_PAD_GPIO1_IO01__USB_OTG1_OC	0x0001b0b0
+				/* PWR */
+				MX6UL_PAD_GPIO1_IO04__GPIO1_IO04	0x0001b099
+			>;
+		};
+
+		pinctrl_usdhc1: usdhc1grp {
+			fsl,pins = <
+				MX6UL_PAD_SD1_CLK__USDHC1_CLK		0x00017069
+				MX6UL_PAD_SD1_CMD__USDHC1_CMD		0x00017059
+				MX6UL_PAD_SD1_DATA0__USDHC1_DATA0	0x00017059
+				MX6UL_PAD_SD1_DATA1__USDHC1_DATA1	0x00017059
+				MX6UL_PAD_SD1_DATA2__USDHC1_DATA2	0x00017059
+				MX6UL_PAD_SD1_DATA3__USDHC1_DATA3	0x00017059
+				/* WP */
+				MX6UL_PAD_UART1_CTS_B__GPIO1_IO18	0x0001b099
+				/* CD */
+				MX6UL_PAD_UART1_RTS_B__GPIO1_IO19	0x0001b099
+			>;
+		};
+
+		pinctrl_usdhc1_100mhz: usdhc1grp100mhz {
+			fsl,pins = <
+				MX6UL_PAD_SD1_CLK__USDHC1_CLK		0x00017069
+				MX6UL_PAD_SD1_CMD__USDHC1_CMD		0x000170b9
+				MX6UL_PAD_SD1_DATA0__USDHC1_DATA0	0x000170b9
+				MX6UL_PAD_SD1_DATA1__USDHC1_DATA1	0x000170b9
+				MX6UL_PAD_SD1_DATA2__USDHC1_DATA2	0x000170b9
+				MX6UL_PAD_SD1_DATA3__USDHC1_DATA3	0x000170b9
+				/* WP */
+				MX6UL_PAD_UART1_CTS_B__GPIO1_IO18	0x0001b099
+				/* CD */
+				MX6UL_PAD_UART1_RTS_B__GPIO1_IO19	0x0001b099
+			>;
+		};
+
+		pinctrl_usdhc1_200mhz: usdhc1grp200mhz {
+			fsl,pins = <
+				MX6UL_PAD_SD1_CLK__USDHC1_CLK		0x00017069
+				MX6UL_PAD_SD1_CMD__USDHC1_CMD		0x000170f9
+				MX6UL_PAD_SD1_DATA0__USDHC1_DATA0	0x000170f9
+				MX6UL_PAD_SD1_DATA1__USDHC1_DATA1	0x000170f9
+				MX6UL_PAD_SD1_DATA2__USDHC1_DATA2	0x000170f9
+				MX6UL_PAD_SD1_DATA3__USDHC1_DATA3	0x000170f9
+				/* WP */
+				MX6UL_PAD_UART1_CTS_B__GPIO1_IO18	0x0001b099
+				/* CD */
+				MX6UL_PAD_UART1_RTS_B__GPIO1_IO19	0x0001b099
+			>;
+		};
+
+		pinctrl_wdog1: wdog1grp {
+			fsl,pins = <
+				MX6UL_PAD_GPIO1_IO08__WDOG1_WDOG_B	0x0001b099
+			>;
+		};
+	};
+};
+
+&pwm2 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_pwm2>;
+	clocks = <&clks IMX6UL_CLK_PWM2>,
+		 <&clks IMX6UL_CLK_PWM2>;
+	clock-names = "ipg", "per";
+	status = "okay";
+};
+
+&sai1 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_sai1>;
+	assigned-clocks = <&clks IMX6UL_CLK_SAI1_SEL>,
+			  <&clks IMX6UL_CLK_SAI1>;
+	assigned-clock-parents = <&clks IMX6UL_CLK_PLL4_AUDIO_DIV>;
+	assigned-clock-rates = <0>, <24000000>;
+	fsl,sai-mclk-direction-output;
+	status = "okay";
+};
+
+&uart1 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_uart1>;
+	status = "okay";
+};
+
+&uart3 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_uart3>;
+	status = "okay";
+};
+
+&uart6 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_uart6>;
+	fsl,uart-has-rtscts;
+	/* for DTE mode, add below change */
+	/* fsl,dte-mode; */
+	/* pinctrl-0 = <&pinctrl_uart6dte>; */
+	status = "okay";
+};
+
+/* otg-port */
+&usbotg1 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_usb_otg1>;
+	vbus-supply = <&reg_otg1vbus_5v0>;
+	dr_mode = "host";
+	status = "okay";
+};
+
+/* 7-port usb hub */
+/* id, pwr, oc pins not connected */
+&usbotg2 {
+	disable-over-current;
+	vbus-supply = <&reg_otg2vbus_5v0>;
+	dr_mode = "host";
+	status = "okay";
+};
+
+&usdhc1 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_usdhc1>;
+	cd-gpios = <&gpio1 19 GPIO_ACTIVE_LOW>;
+	wp-gpios = <&gpio1 18 GPIO_ACTIVE_HIGH>;
+	bus-width = <4>;
+	vmmc-supply = <&reg_mba6ul_3v3>;
+	vqmmc-supply = <&reg_vccsd>;
+	no-1-8-v;
+	status = "okay";
+};
+
+&wdog1 {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_wdog1>;
+	fsl,wdog_b;
+	status = "okay";
+};
diff --git a/arch/arm/boot/dts/tqma6ul-common.dtsi b/arch/arm/boot/dts/tqma6ul-common.dtsi
new file mode 100644
index 000000000000..77929d90c62b
--- /dev/null
+++ b/arch/arm/boot/dts/tqma6ul-common.dtsi
@@ -0,0 +1,210 @@
+/*
+ * Copyright 2016 Marco Felsch, TQ Systems GmbH
+ *
+ * The code contained herein is licensed under the GNU General Public
+ * License. You may obtain a copy of the GNU General Public License
+ * Version 2 or later at the following locations:
+ *
+ * http://www.opensource.org/licenses/gpl-license.html
+ * http://www.gnu.org/copyleft/gpl.html
+ */
+
+/ {
+	memory {
+		reg = <0x80000000 0x10000000>;
+	};
+};
+
+&cpu0 {
+	arm-supply = <&reg_arm>;
+	soc-supply = <&reg_soc>;
+	fsl,arm-soc-shared = <0>;
+};
+
+&gpc {
+	fsl,ldo-bypass = <0>;
+};
+
+&i2c4 {
+	clock-frequency = <100000>;
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_i2c4>;
+	status = "okay";
+
+	pmic: pfuze3000@08 {
+		compatible = "fsl,pfuze3000";
+		reg = <0x08>;
+
+		regulators {
+			reg_sw1a: sw1a {
+				regulator-min-microvolt = <700000>;
+				regulator-max-microvolt = <1475000>;
+				regulator-boot-on;
+				regulator-ramp-delay = <6250>;
+				/* not used */
+			};
+
+			reg_sw1b_core: sw1b {
+				regulator-min-microvolt = <700000>;
+				regulator-max-microvolt = <1475000>;
+				regulator-boot-on;
+				regulator-always-on;
+				regulator-ramp-delay = <6250>;
+			};
+
+			reg_sw2: sw2 {
+				regulator-min-microvolt = <2500000>;
+				regulator-max-microvolt = <3300000>;
+				regulator-boot-on;
+			};
+
+			reg_sw3_ddr: sw3 {
+				regulator-min-microvolt = <900000>;
+				regulator-max-microvolt = <1650000>;
+				regulator-boot-on;
+				regulator-always-on;
+			};
+
+			reg_swbst: swbst {
+				regulator-min-microvolt = <5000000>;
+				regulator-max-microvolt = <5150000>;
+				/* not used */
+			};
+
+			reg_snvs_3v0: vsnvs {
+				regulator-min-microvolt = <1000000>;
+				regulator-max-microvolt = <3000000>;
+				regulator-boot-on;
+				regulator-always-on;
+			};
+
+			reg_vrefddr: vrefddr {
+				regulator-boot-on;
+				regulator-always-on;
+			};
+
+			reg_vccsd: vccsd {
+				regulator-min-microvolt = <2850000>;
+				regulator-max-microvolt = <3300000>;
+			};
+
+			reg_v33_3v3: v33 {
+				regulator-min-microvolt = <2850000>;
+				regulator-max-microvolt = <3300000>;
+				regulator-always-on;
+			};
+
+			reg_vldo1_3v3: vldo1 {
+				regulator-min-microvolt = <1800000>;
+				regulator-max-microvolt = <3300000>;
+				regulator-boot-on;
+				/* not used */
+			};
+
+			reg_vldo2: vldo2 {
+				regulator-min-microvolt = <800000>;
+				regulator-max-microvolt = <1550000>;
+				regulator-boot-on;
+				/* not used */
+			};
+
+			reg_vldo3: vldo3 {
+				regulator-min-microvolt = <1800000>;
+				regulator-max-microvolt = <3300000>;
+				regulator-boot-on;
+				/* not used */
+			};
+
+			reg_vldo4: vldo4 {
+				regulator-min-microvolt = <1800000>;
+				regulator-max-microvolt = <1800000>;
+				regulator-fixed;
+				regulator-always-on;
+			};
+		};
+	};
+
+	/*
+	 * NXP SE97BTP with temperature sensor + eeprom
+	 * ATTENTION: do not use correct dt compatible since this will conflict
+	 * with hwmon sysfs ABI and break device registration
+	 */
+	temp0: jc42@1a {
+		compatible = "jc42";
+		reg = <0x1a>;
+		status = "okay";
+	};
+
+	eeprom0: 24c64@50 {
+		compatible = "atmel,24c64";
+		reg = <0x50>;
+		pagesize = <32>;
+		status = "okay";
+	};
+
+	eeprom1: 24c02@52 {
+		compatible = "atmel,24c02";
+		reg = <0x52>;
+		pagesize = <16>;
+		status = "okay";
+	};
+
+	rtc1: ds1339@68 {
+		compatible = "ds1339";
+		reg = <0x68>;
+		status = "okay";
+	};
+};
+
+&iomuxc {
+	imx6ul-tqma6ul {
+		pinctrl_i2c4: i2c4grp {
+			fsl,pins = <
+				MX6UL_PAD_UART2_TX_DATA__I2C4_SCL	0x4001b8b0
+				MX6UL_PAD_UART2_RX_DATA__I2C4_SDA	0x4001b8b0
+			>;
+		};
+
+		/*
+		 * currently not used, potentially dangerous if used on
+		 * baseboard
+		 */
+		pinctrl_pmic: pmic {
+			fsl,pins = <
+				/* PMIC irq */
+				MX6UL_PAD_CSI_DATA03__GPIO4_IO24	0x1b099
+			>;
+		};
+	};
+};
+
+&qspi {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_qspi>;
+	status = "okay";
+
+	flash0: spinor@0 {
+		#address-cells = <1>;
+		#size-cells = <1>;
+		compatible = "jedec,spi-nor";
+		spi-max-frequency = <33000000>;
+		reg = <0>;
+	};
+};
+
+&snvs_rtc {
+	status = "disabled";
+};
+
+/* eMMC */
+&usdhc2 {
+	pinctrl-names = "default", "state_100mhz" , "state_200mhz";
+	pinctrl-0 = <&pinctrl_usdhc2>;
+	pinctrl-1 = <&pinctrl_usdhc2_100mhz>;
+	pinctrl-2 = <&pinctrl_usdhc2_200mhz>;
+
+	bus-width = <8>;
+	disable-wp;
+	non-removable;
+	status = "okay";
+};
diff --git a/arch/arm/boot/dts/tqma6ulxl-common.dtsi b/arch/arm/boot/dts/tqma6ulxl-common.dtsi
new file mode 100644
index 000000000000..c1284b647b20
--- /dev/null
+++ b/arch/arm/boot/dts/tqma6ulxl-common.dtsi
@@ -0,0 +1,53 @@
+/*
+ * Copyright 2016 Marco Felsch, TQ Systems GmbH
+ * Copyright 2017 - 2018 Markus Niebel, TQ Systems GmbH
+ *
+ * The code contained herein is licensed under the GNU General Public
+ * License. You may obtain a copy of the GNU General Public License
+ * Version 2 or later at the following locations:
+ *
+ * http://www.opensource.org/licenses/gpl-license.html
+ * http://www.gnu.org/copyleft/gpl.html
+ */
+
+/ {
+	regulators_tqma6ul {
+		compatible = "simple-bus";
+		#address-cells = <1>;
+		#size-cells = <0>;
+
+		reg_tqma6ul_3v3: regulator@0 {
+			compatible = "regulator-fixed";
+			regulator-name = "supply-tqma6ul-3v3";
+			reg = <0>;
+			regulator-min-microvolt = <3300000>;
+			regulator-max-microvolt = <3300000>;
+			regulator-always-on;
+		};
+	};
+};
+
+&iomuxc {
+	imx6ul-tqma6ul {
+		pinctrl_qspi: qspigrp {
+			fsl,pins = <
+				MX6UL_PAD_NAND_WP_B__QSPI_A_SCLK      0x70a9
+				MX6UL_PAD_NAND_READY_B__QSPI_A_DATA00 0x70a9
+				MX6UL_PAD_NAND_CE0_B__QSPI_A_DATA01   0x70a9
+				MX6UL_PAD_NAND_CE1_B__QSPI_A_DATA02   0x70a9
+				MX6UL_PAD_NAND_CLE__QSPI_A_DATA03     0x70a9
+				MX6UL_PAD_NAND_DQS__QSPI_A_SS0_B      0x70a1
+			>;
+		};
+	};
+};
+
+&reg_sw2 {
+	regulator-always-on;
+};
+
+/* eMMC */
+&usdhc2 {
+	vmmc-supply = <&reg_sw2>;
+	vqmmc-supply = <&reg_vldo4>;
+};
