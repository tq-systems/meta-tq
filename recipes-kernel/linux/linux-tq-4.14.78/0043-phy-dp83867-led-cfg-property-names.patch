From e73e5745a5a944e73a8f3f24d88b5ed0fa10a4c2 Mon Sep 17 00:00:00 2001
From: Michael Krummsdorf <michael.krummsdorf@tq-group.com>
Date: Wed, 17 Jan 2018 11:31:28 +0100
Subject: [PATCH 043/188] phy: dp83867: led-cfg property names

Unify property names with vendor prefix.
Also set led cfg even when not RGMII.

Signed-off-by: Michael Krummsdorf <michael.krummsdorf@tq-group.com>
---
 Documentation/devicetree/bindings/net/ti,dp83867.txt | 4 ++--
 drivers/net/phy/dp83867.c                            | 7 +++++--
 2 files changed, 7 insertions(+), 4 deletions(-)

diff --git a/Documentation/devicetree/bindings/net/ti,dp83867.txt b/Documentation/devicetree/bindings/net/ti,dp83867.txt
index 9abce2178c17..397a539f0bc2 100644
--- a/Documentation/devicetree/bindings/net/ti,dp83867.txt
+++ b/Documentation/devicetree/bindings/net/ti,dp83867.txt
@@ -10,8 +10,8 @@ Required properties:
 		PHY_INTERFACE_MODE_RGMII_ID or PHY_INTERFACE_MODE_RGMII_TXID
 	- ti,fifo-depth - Transmitt FIFO depth- see dt-bindings/net/ti-dp83867.h
 		for applicable values
-	- led-cfg1 - Value of LED configuration register 1
-	- led-cfg2 - Value of LED configuration register 2
+	- ti,led-cfg1 - Value of LED configuration register 1
+	- ti,led-cfg2 - Value of LED configuration register 2
 
 Optional property:
 	- ti,min-output-impedance - MAC Interface Impedance control to set
diff --git a/drivers/net/phy/dp83867.c b/drivers/net/phy/dp83867.c
index a40f3b6e15f1..5cfe5dd21e06 100644
--- a/drivers/net/phy/dp83867.c
+++ b/drivers/net/phy/dp83867.c
@@ -192,12 +192,12 @@ static int dp83867_of_init(struct phy_device *phydev)
 	if (of_property_read_bool(of_node, "enet-phy-lane-no-swap"))
 		dp83867->port_mirroring = DP83867_PORT_MIRROING_DIS;
 
-	ret = of_property_read_u32(of_node, "led-cfg1",
+	ret = of_property_read_u32(of_node, "ti,led-cfg1",
 				&dp83867->led_cfg1);
 	if (ret)
 		return ret;
 
-	ret = of_property_read_u32(of_node, "led-cfg2",
+	ret = of_property_read_u32(of_node, "ti,led-cfg2",
 				&dp83867->led_cfg2);
 	if (ret)
 		return ret;
@@ -312,6 +312,9 @@ static int dp83867_config_init(struct phy_device *phydev)
 	if (dp83867->port_mirroring != DP83867_PORT_MIRROING_KEEP)
 		dp83867_config_port_mirroring(phydev);
 
+	phy_write(phydev, DP83867_LEDCR1, dp83867->led_cfg1);
+	phy_write(phydev, DP83867_LEDCR2, dp83867->led_cfg2);
+
 	return 0;
 }
 
