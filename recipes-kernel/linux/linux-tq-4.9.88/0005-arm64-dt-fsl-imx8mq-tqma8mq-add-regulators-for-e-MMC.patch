From 4e1b79e246247c5b2ec06d44a131b4f4798a33da Mon Sep 17 00:00:00 2001
From: Markus Niebel <Markus.Niebel@tq-group.com>
Date: Thu, 17 Jan 2019 18:00:19 +0100
Subject: [PATCH 05/13] arm64: dt: fsl-imx8mq-tqma8mq: add regulators for e-MMC
 device

Signed-off-by: Markus Niebel <Markus.Niebel@tq-group.com>
---
 .../arm64/boot/dts/freescale/fsl-imx8mq-tqma8mq.dtsi | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

diff --git a/arch/arm64/boot/dts/freescale/fsl-imx8mq-tqma8mq.dtsi b/arch/arm64/boot/dts/freescale/fsl-imx8mq-tqma8mq.dtsi
index ca6d24af5707..4352a31ed7bd 100644
--- a/arch/arm64/boot/dts/freescale/fsl-imx8mq-tqma8mq.dtsi
+++ b/arch/arm64/boot/dts/freescale/fsl-imx8mq-tqma8mq.dtsi
@@ -25,6 +25,14 @@
 
 	chosen {
 	};
+
+	reg_tqma8mx_vcc3v3: tqma8mx_vcc3v3 {
+		compatible = "regulator-fixed";
+		regulator-name = "TQMA8MX_VCC3V3";
+		regulator-min-microvolt = <3300000>;
+		regulator-max-microvolt = <3300000>;
+		regulator-always-on;
+	};
 };
 
 &iomuxc {
@@ -143,7 +151,7 @@
 				regulator-always-on;
 			};
 
-			sw4_reg: sw4 {
+			nvcc_1v8_reg: sw4 {
 				regulator-min-microvolt = <800000>;
 				regulator-max-microvolt = <3300000>;
 				regulator-always-on;
@@ -238,6 +246,8 @@
 	pinctrl-2 = <&pinctrl_usdhc1_200mhz>;
 	bus-width = <8>;
 	non-removable;
+	vmmc-supply = <&reg_tqma8mx_vcc3v3>;
+	vqmmc-supply = <&nvcc_1v8_reg>;
 	status = "okay";
 };
 
-- 
2.17.1

