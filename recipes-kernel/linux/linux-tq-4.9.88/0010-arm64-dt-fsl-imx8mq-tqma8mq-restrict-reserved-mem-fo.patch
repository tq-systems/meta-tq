From 4ba2b6efc33ad841761b50e5889276f05f50cc07 Mon Sep 17 00:00:00 2001
From: Markus Niebel <Markus.Niebel@tq-group.com>
Date: Fri, 18 Jan 2019 12:11:26 +0100
Subject: [PATCH 10/11] arm64: dt: fsl-imx8mq-tqma8mq: restrict reserved mem
 for CMA

module has only 1GiB memory, limit CMA size to 256 MiB

Signed-off-by: Markus Niebel <Markus.Niebel@tq-group.com>
---
 .../boot/dts/freescale/fsl-imx8mq-tqma8mq.dtsi  | 17 ++++++++++++++++-
 1 file changed, 16 insertions(+), 1 deletion(-)

diff --git a/arch/arm64/boot/dts/freescale/fsl-imx8mq-tqma8mq.dtsi b/arch/arm64/boot/dts/freescale/fsl-imx8mq-tqma8mq.dtsi
index 59a1d7b1bccb..263047a1771c 100644
--- a/arch/arm64/boot/dts/freescale/fsl-imx8mq-tqma8mq.dtsi
+++ b/arch/arm64/boot/dts/freescale/fsl-imx8mq-tqma8mq.dtsi
@@ -31,7 +31,22 @@
 		regulator-name = "TQMA8MX_VCC3V3";
 		regulator-min-microvolt = <3300000>;
 		regulator-max-microvolt = <3300000>;
-		enable-always-on;
+		regulator-always-on;
+	};
+
+	reserved-memory {
+		#address-cells = <2>;
+		#size-cells = <2>;
+		ranges;
+
+		/* global autoconfigured region for contiguous allocations */
+		linux,cma {
+			compatible = "shared-dma-pool";
+			reusable;
+			size = <0 0x10000000>;
+			alloc-ranges = <0 0x40000000 0 0x40000000>;
+			linux,cma-default;
+		};
 	};
 };
 
-- 
2.17.1

